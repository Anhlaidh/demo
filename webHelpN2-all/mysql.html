<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-04-30T19:02:50.59687"><title>Table of Contents | Notes</title><script type="application/json" id="virtual-toc-data">[{"id":"mysql","level":0,"title":"MySQL","anchor":"#mysql"},{"id":"po1oey_1071","level":0,"title":"介绍","anchor":"#po1oey_1071"},{"id":"po1oey_1190","level":0,"title":"常用命令","anchor":"#po1oey_1190"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Table of Contents | Notes"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Notes Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/mysql.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Table of Contents | Notes"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/mysql.html#webpage",
    "url": "writerside-documentation/mysql.html",
    "name": "Table of Contents | Notes",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Notes Help"
}</script><!-- End Schema.org --></head><body data-id="MySQL" data-main-title="Table of Contents" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Notes///java///notes///DB"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Notes  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="MySQL" id="MySQL.md">Table of Contents</h1><ul class="list _bullet" id="po1oey_1042"><li class="list__item" id="po1oey_1043"><p><span id="po1oey_1044">MySQL</span>* <span id="po1oey_1045">Table of Contents</span></p><ul class="list _bullet" id="po1oey_1046"><li class="list__item" id="po1oey_1047"><p><span id="po1oey_1048">SQL概述</span></p></li><li class="list__item" id="po1oey_1049"><p><span id="po1oey_1050">连接数据库</span></p></li><li class="list__item" id="po1oey_1051"><p><span id="po1oey_1052">概念</span></p></li><li class="list__item" id="po1oey_1053"><p><span id="po1oey_1054">常用命令</span></p><ul class="list _bullet" id="po1oey_1055"><li class="list__item" id="po1oey_1056"><p><span id="po1oey_1057">Base</span></p><ul class="list _bullet" id="po1oey_1058"><li class="list__item" id="po1oey_1059"><p><span id="po1oey_1060">简单查询</span></p></li><li class="list__item" id="po1oey_1061"><p><span id="po1oey_1062">分组查询</span></p></li><li class="list__item" id="po1oey_1063"><p><span id="po1oey_1064">总结</span></p></li><li class="list__item" id="po1oey_1065"><p><span id="po1oey_1066">连接查询</span></p></li><li class="list__item" id="po1oey_1067"><p><span id="po1oey_1068">子查询</span></p></li><li class="list__item" id="po1oey_1069"><p><span id="po1oey_1070">union</span></p></li></ul></li></ul></li></ul></li></ul><section class="chapter"><h2 id="mysql" data-toc="mysql">MySQL</h2></section><section class="chapter"><h2 id="po1oey_1071" data-toc="po1oey_1071">介绍</h2><section class="chapter"><h3 id="po1oey_1072" data-toc="po1oey_1072">数据是什么</h3></section><section class="chapter"><h3 id="po1oey_1073" data-toc="po1oey_1073">如何存储</h3></section><section class="chapter"><h3 id="po1oey_1074" data-toc="po1oey_1074">数据库引擎</h3><ul class="list _bullet" id="po1oey_1075"><li class="list__item" id="po1oey_1076"><p id="po1oey_1077">innodb</p></li><li class="list__item" id="po1oey_1078"><p id="po1oey_1079">myisam</p></li><li class="list__item" id="po1oey_1080"><p id="po1oey_1081">memory</p></li><li class="list__item" id="po1oey_1082"><p id="po1oey_1083">区别</p><ol class="list _decimal" id="po1oey_1084" type="1"><li class="list__item" id="po1oey_1085"><p>innodb存储引擎数据跟索引文件放在一个文件中,myisam分为不同文件</p></li><li class="list__item" id="po1oey_1086"><p>innodb支持事务,myisam不支持事务</p></li><li class="list__item" id="po1oey_1087"><p>innodb支持表锁和行锁,myisam支持表锁</p></li><li class="list__item" id="po1oey_1088"><p>innodb有外键,myisam没有外键</p></li></ol></li></ul></section><section class="chapter"><h3 id="po1oey_1089" data-toc="po1oey_1089">索引的分类</h3><ul class="list _bullet" id="po1oey_1090"><li class="list__item" id="po1oey_1091"><p>主键索引 </p><ul class="list _bullet" id="po1oey_1092"><li class="list__item" id="po1oey_1093"><p>主键索引是一种唯一性索引,但它必须指定为primary key,每个表只能有一个主见</p></li></ul></li><li class="list__item" id="po1oey_1094"><p>唯一索引 </p><ul class="list _bullet" id="po1oey_1095"><li class="list__item" id="po1oey_1096"><p>索引的列所有值都只能出现一次,即必须唯一,值可以为空</p></li></ul></li><li class="list__item" id="po1oey_1097"><p>普通索引 </p><ul class="list _bullet" id="po1oey_1098"><li class="list__item" id="po1oey_1099"><p>基本的索引类型,值可以为空,没有唯一性限制</p></li></ul></li><li class="list__item" id="po1oey_1100"><p>全文索引 </p><ul class="list _bullet" id="po1oey_1101"><li class="list__item" id="po1oey_1102"><p>全文索引类型为FULLTEXT,全文索引可以在varchar,char,text类型的列上创建</p></li></ul></li><li class="list__item" id="po1oey_1103"><p>组合索引 </p><ul class="list _bullet" id="po1oey_1104"><li class="list__item" id="po1oey_1105"><p>多列值组成一个索引,专门用于组合搜索</p></li></ul></li></ul><section class="chapter"><h4 id="po1oey_1106" data-toc="po1oey_1106">回表</h4></section><section class="chapter"><h4 id="po1oey_1107" data-toc="po1oey_1107">最左匹配原则</h4></section><section class="chapter"><h4 id="po1oey_1108" data-toc="po1oey_1108">索引覆盖</h4></section><section class="chapter"><h4 id="po1oey_1109" data-toc="po1oey_1109">索引下推</h4><p id="po1oey_1110"><code class="code" id="po1oey_1111">select * from t1 where age=? and gender=?</code> 先根据age字段从存储引擎层将数据拉取回server层,然后在server层进行gender筛选,再从存储引擎层拉去数据的 时候,就会直接根据age,gender一起筛选 ##准备</p></section></section><section class="chapter"><h3 id="po1oey_1112" data-toc="po1oey_1112">数据库</h3><ul class="list _bullet" id="po1oey_1113"><li class="list__item" id="po1oey_1114"><p id="po1oey_1115">云数据库</p><ul class="list _bullet" id="po1oey_1116"><li class="list__item" id="po1oey_1117"><p>RDS,PolarDB,TDSQL</p></li></ul></li><li class="list__item" id="po1oey_1118"><p id="po1oey_1119">NewSQL</p><ul class="list _bullet" id="po1oey_1120"><li class="list__item" id="po1oey_1121"><p>TiDB</p></li></ul></li><li class="list__item" id="po1oey_1122"><p id="po1oey_1123">生产线</p><ul class="list _bullet" id="po1oey_1124"><li class="list__item" id="po1oey_1125"><p>厂家 </p><ul class="list _bullet" id="po1oey_1126"><li class="list__item" id="po1oey_1127"><p>Oracle 官方</p></li><li class="list__item" id="po1oey_1128"><p>MariaDB</p></li><li class="list__item" id="po1oey_1129"><p>Percona</p></li></ul></li></ul></li><li class="list__item" id="po1oey_1130"><p id="po1oey_1131">5.6</p><ul class="list _bullet" id="po1oey_1132"><li class="list__item" id="po1oey_1133"><p>5.6.36,5.6.38,5.6.40,5.6.46</p></li></ul></li><li class="list__item" id="po1oey_1134"><p id="po1oey_1135">5.7</p><ul class="list _bullet" id="po1oey_1136"><li class="list__item" id="po1oey_1137"><p>5.7.20 22 24....</p></li></ul></li><li class="list__item" id="po1oey_1138"><p id="po1oey_1139">8.0</p><ul class="list _bullet" id="po1oey_1140"><li class="list__item" id="po1oey_1141"><p>8.0.11,8.0.17,8.0.18</p></li></ul></li><li class="list__item" id="po1oey_1142"><p id="po1oey_1143">C:社区版</p></li><li class="list__item" id="po1oey_1144"><p id="po1oey_1145">E:企业版</p></li></ul></section><section class="chapter"><h3 id="linux-mysql" data-toc="linux-mysql">linux环境 mysql指令</h3><ul class="list _bullet" id="po1oey_1146"><li class="list__item" id="po1oey_1147"><p>数据初始化 </p><ul class="list _bullet" id="po1oey_1148"><li class="list__item" id="po1oey_1149"><p><code class="code" id="po1oey_1150">mysqld --initialize-insecure --user=xxx --basedir=/app/database/mysql --datadir=/data/3306/</code></p></li><li class="list__item" id="po1oey_1151"><p>有-insecure </p><ol class="list _decimal" id="po1oey_1152" type="1"><li class="list__item" id="po1oey_1153"><p>初始化完成后,有12位临时密码,必须在使用mysql之前重置这个密码</p></li><li class="list__item" id="po1oey_1154"><p>密码管理使用严格模式: 3种密码复杂度,8位以上</p></li><li class="list__item" id="po1oey_1155"></li></ol></li></ul></li></ul></section><section class="chapter"><h3 id="sql" data-toc="sql">SQL概述</h3><ul class="list _bullet" id="po1oey_1156"><li class="list__item" id="po1oey_1157"><p>Structured Query Language </p><ul class="list _bullet" id="po1oey_1158"><li class="list__item" id="po1oey_1159"><p>用来跟数据库打交道,完成和数据库的通信,90%以上的SQL语句是通用的</p></li></ul></li><li class="list__item" id="po1oey_1160"><p>数据库(notes.DB) </p><ul class="list _bullet" id="po1oey_1161"><li class="list__item" id="po1oey_1162"><p>notes.DB: 通常是一个或一组文件,保存了一些符合特定规格的数据</p></li><li class="list__item" id="po1oey_1163"><p>DBMS:DataBase Management System 数据库管理系统 MySql,Oracle,执行SQL,操作数据库</p></li></ul></li></ul></section><section class="chapter"><h3 id="po1oey_1164" data-toc="po1oey_1164">连接数据库</h3><ul class="list _bullet" id="po1oey_1165"><li class="list__item" id="po1oey_1166"><p>mysql -uxxxxx -pxxxxx</p></li></ul><div class="code-block" data-lang="bash">
msyql -uroot -p123456
</div></section><section class="chapter"><h3 id="po1oey_1168" data-toc="po1oey_1168">概念</h3><ul class="list _bullet" id="po1oey_1169"><li class="list__item" id="po1oey_1170"><p>table </p><ul class="list _bullet" id="po1oey_1171"><li class="list__item" id="po1oey_1172"><p>一种结构化的文件,用来存储特定类型的数据</p></li></ul></li><li class="list__item" id="po1oey_1173"><p>SQL的分类 </p><ul class="list _bullet" id="po1oey_1174"><li class="list__item" id="po1oey_1175"><p>数据查询语言(DQL-Data Query Language) </p><ul class="list _bullet" id="po1oey_1176"><li class="list__item" id="po1oey_1177"><p>select</p></li></ul></li><li class="list__item" id="po1oey_1178"><p>数据操纵语言(DML-Data Manipulation Language) </p><ul class="list _bullet" id="po1oey_1179"><li class="list__item" id="po1oey_1180"><p>insert,delete,update</p></li></ul></li><li class="list__item" id="po1oey_1181"><p>数据定义语言(DDL-Data Definition Language) </p><ul class="list _bullet" id="po1oey_1182"><li class="list__item" id="po1oey_1183"><p>create,drop,alter</p></li></ul></li><li class="list__item" id="po1oey_1184"><p>事务控制语言(TCL-Transactional Control Language) </p><ul class="list _bullet" id="po1oey_1185"><li class="list__item" id="po1oey_1186"><p>commit,rollback</p></li></ul></li><li class="list__item" id="po1oey_1187"><p>数据控制语言(DCL-Data Control Language) </p><ul class="list _bullet" id="po1oey_1188"><li class="list__item" id="po1oey_1189"><p>grant,revoke</p></li></ul></li></ul></li></ul></section></section><section class="chapter"><h2 id="po1oey_1190" data-toc="po1oey_1190">常用命令</h2><ul class="list _bullet" id="po1oey_1191"><li class="list__item" id="po1oey_1192"><p><code class="code" id="po1oey_1193">select version();</code>查看版本</p></li><li class="list__item" id="po1oey_1194"><p><code class="code" id="po1oey_1195">select database();</code>查看当前数据库</p></li><li class="list__item" id="po1oey_1196"><p><code class="code" id="po1oey_1197">desc &lt;database&gt;;</code> 查看详细信息</p></li><li class="list__item" id="po1oey_1198"><p><code class="code" id="po1oey_1199">show create table &lt;tablename&gt;;</code>查看建表语句</p></li></ul><section class="chapter"><h3 id="base" data-toc="base">Base</h3><section class="chapter"><h4 id="po1oey_1200" data-toc="po1oey_1200">简单查询</h4><ul class="list _bullet" id="po1oey_1201"><li class="list__item" id="po1oey_1202"><p id="po1oey_1203">查询</p><ul class="list _bullet" id="po1oey_1204"><li class="list__item" id="po1oey_1205"><p><code class="code" id="po1oey_1206">select &lt;volumes&gt; from &lt;table&gt;;</code> 查询某个字段的信息(无视大小写) </p><ul class="list _bullet" id="po1oey_1207"><li class="list__item" id="po1oey_1208"><p>可以加数学表达式 </p><ul class="list _bullet" id="po1oey_1209"><li class="list__item" id="po1oey_1210"><p><code class="code" id="po1oey_1211">select empno,ename,sal*12 from emp;</code></p></li></ul></li><li class="list__item" id="po1oey_1212"><p>重命名 </p><ul class="list _bullet" id="po1oey_1213"><li class="list__item" id="po1oey_1214"><p><code class="code" id="po1oey_1215">select empno,ename,sal*12 as years from emp;</code> 加as,可空格不写as select empno,ename,sal*12 as years from emp;</p></li></ul></li></ul></li></ul></li><li class="list__item" id="po1oey_1216"><p id="po1oey_1217">条件查询</p><ul class="list _bullet" id="po1oey_1218"><li class="list__item" id="po1oey_1219"><p><code class="code" id="po1oey_1220">select &lt;volumes&gt; from &lt;table&gt; where &lt;条件&gt;;</code></p></li><li class="list__item" id="po1oey_1221"><p>条件 </p><ul class="list _bullet" id="po1oey_1222"><li class="list__item" id="po1oey_1223"><div class="table-wrapper"><table class="wide" id="po1oey_1224"><thead><tr class="ijRowHead" id="po1oey_1225"><th id="po1oey_1226"><p>运算符</p></th><th id="po1oey_1227"><p>说明</p></th></tr></thead><tbody><tr id="po1oey_1228"><td id="po1oey_1229"><p>=</p></td><td id="po1oey_1230"><p>等于</p></td></tr><tr id="po1oey_1231"><td id="po1oey_1232"><p>&lt;&gt;或!=</p></td><td id="po1oey_1233"><p>不等于</p></td></tr><tr id="po1oey_1234"><td id="po1oey_1235"><p>&lt;</p></td><td id="po1oey_1236"><p>小于</p></td></tr><tr id="po1oey_1237"><td id="po1oey_1238"><p>&gt;</p></td><td id="po1oey_1239"><p>大于</p></td></tr><tr id="po1oey_1240"><td id="po1oey_1241"><p>&gt;=</p></td><td id="po1oey_1242"><p>大于等于</p></td></tr><tr id="po1oey_1243"><td id="po1oey_1244"><p>between ...and...</p></td><td id="po1oey_1245"><p>两只之间,等同于&gt;= and &lt;=,左闭右开</p></td></tr><tr id="po1oey_1246"><td id="po1oey_1247"><p>is null</p></td><td id="po1oey_1248"><p>为null(is not null 不为空)</p></td></tr><tr id="po1oey_1249"><td id="po1oey_1250"><p>and</p></td><td id="po1oey_1251"><p>并且 ,优先级高于'or'</p></td></tr><tr id="po1oey_1252"><td id="po1oey_1253"><p>or</p></td><td id="po1oey_1254"><p>或者</p></td></tr><tr id="po1oey_1255"><td id="po1oey_1256"><p>in</p></td><td id="po1oey_1257"><p>包含</p></td></tr><tr id="po1oey_1258"><td id="po1oey_1259"><p>not</p></td><td id="po1oey_1260"><p>取非,主要用在is 或 in中</p></td></tr><tr id="po1oey_1261"><td id="po1oey_1262"><p>like</p></td><td id="po1oey_1263"><p>模糊查询,支持%或下划线匹配,%匹配任意个字符,下划线,一个下划线匹配一个字符</p></td></tr></tbody></table></div></li></ul></li></ul></li><li class="list__item" id="po1oey_1264"><p id="po1oey_1265">排序</p><ul class="list _bullet" id="po1oey_1266"><li class="list__item" id="po1oey_1267"><p><code class="code" id="po1oey_1268">order by &lt;volume&gt;</code> 默认升序,volume可为数字,代表第几个属性 </p><ul class="list _bullet" id="po1oey_1269"><li class="list__item" id="po1oey_1270"><p><code class="code" id="po1oey_1271">asc</code> 升序</p></li><li class="list__item" id="po1oey_1272"><p><code class="code" id="po1oey_1273">desc</code> 降序</p></li></ul></li></ul></li><li class="list__item" id="po1oey_1274"><p id="po1oey_1275">数据处理函数/单行处理函数</p><ul class="list _bullet" id="po1oey_1276"><li class="list__item" id="po1oey_1277"><div class="table-wrapper"><table class="wide" id="po1oey_1278"><thead><tr class="ijRowHead" id="po1oey_1279"><th id="po1oey_1280"><p>运算符</p></th><th id="po1oey_1281"><p>说明</p></th><th id="po1oey_1282"><p>示例</p></th></tr></thead><tbody><tr id="po1oey_1283"><td id="po1oey_1284"><p>Lower</p></td><td id="po1oey_1285"><p>转换小写</p></td><td id="po1oey_1286"><p>lower(ename)</p></td></tr><tr id="po1oey_1287"><td id="po1oey_1288"><p>upper</p></td><td id="po1oey_1289"><p>转换大写</p></td><td id="po1oey_1290"><p>upper(ename)</p></td></tr><tr id="po1oey_1291"><td id="po1oey_1292"><p>substr</p></td><td id="po1oey_1293"><p>子串</p></td><td id="po1oey_1294"><p>substr(ename,1,2)</p></td></tr><tr id="po1oey_1295"><td id="po1oey_1296"><p>length</p></td><td id="po1oey_1297"><p>取长度</p></td><td id="po1oey_1298"><p>length(ename)</p></td></tr><tr id="po1oey_1299"><td id="po1oey_1300"><p>trim</p></td><td id="po1oey_1301"><p>去空格</p></td><td id="po1oey_1302"><p>trim(ename)</p></td></tr><tr id="po1oey_1303"><td id="po1oey_1304"><p>str_to_date</p></td><td id="po1oey_1305"><p>将字符串换成日期</p></td><td id="po1oey_1306"><p>str_to_date('字符串','时间格式')</p></td></tr><tr id="po1oey_1307"><td id="po1oey_1308"><p>date_format</p></td><td id="po1oey_1309"><p>格式化日期</p></td><td id="po1oey_1310"><p>date_format(日期类型数据,'日期格式')</p></td></tr><tr id="po1oey_1311"><td id="po1oey_1312"><p>format</p></td><td id="po1oey_1313"><p>设置千分位</p></td></tr><tr id="po1oey_1314"><td id="po1oey_1315"><p>round</p></td><td id="po1oey_1316"><p>四舍五入</p></td><td id="po1oey_1317"><p>round(comm,0)第二个参数为取得为数,可为负数</p></td></tr><tr id="po1oey_1318"><td id="po1oey_1319"><p>rand()</p></td><td id="po1oey_1320"><p>生成随机数</p></td><td id="po1oey_1321"><p>与java Math.Random()类似</p></td></tr><tr id="po1oey_1322"><td id="po1oey_1323"><p>ifnull</p></td><td id="po1oey_1324"><p>将null转换为具体值</p></td><td id="po1oey_1325"><p>ifnull(comm,0)如果comm为null,则转换为0</p></td></tr></tbody></table></div></li></ul></li><li class="list__item" id="po1oey_1326"><p id="po1oey_1327">日期</p><ul class="list _bullet" id="po1oey_1328"><li class="list__item" id="po1oey_1329"><p>关于MySQL中的日期处理 </p><ul class="list _bullet" id="po1oey_1330"><li class="list__item" id="po1oey_1331"><p>每一个数据库处理日期的时候,采用的机制都是不同的,日期处理都有自己的一套机制,所以在实际开发中 表中的字段定义为DATE类型,这种情况很少,因为一旦使用日期类型,那么java程序将不能够通用,在实际开发中 一般使用&quot;日期字符串&quot;来表示日期</p></li></ul></li></ul></li><li class="list__item" id="po1oey_1332"><p id="po1oey_1333">MySQL数据库管理系统中对日期的处理提供了两个重要函数</p><ul class="list _bullet" id="po1oey_1334"><li class="list__item" id="po1oey_1335"><p>str_to_date</p></li><li class="list__item" id="po1oey_1336"><p>date_format</p></li></ul></li><li class="list__item" id="po1oey_1337"><p id="po1oey_1338">str_to_date</p><ul class="list _bullet" id="po1oey_1339"><li class="list__item" id="po1oey_1340"><p>该函数的作用是:将日期字符串转换成日期类型 varchar--&gt;date</p></li><li class="list__item" id="po1oey_1341"><p>该函数的执行结果是DATE类型</p></li><li class="list__item" id="po1oey_1342"><p>该函数的使用格式 </p><ul class="list _bullet" id="po1oey_1343"><li class="list__item" id="po1oey_1344"><p>str_to_date('日期字符串','日期格式')</p></li></ul></li></ul></li></ul><div class="code-block" data-lang="sql">
select ename,hiredate from emp where hiredate=str_to_date('12-17-1980','%m-%d-%Y');
</div><ul class="list _bullet" id="po1oey_1346"><li class="list__item" id="po1oey_1347"><p>date_format </p><ul class="list _bullet" id="po1oey_1348"><li class="list__item" id="po1oey_1349"><p>该函数的作用是:将日期类型date转换成剧有特定格式的日期字符串varchar date--&gt;varchar</p></li><li class="list__item" id="po1oey_1350"><p>该函数的运算结果是:varchar类型(具备特定格式)</p></li><li class="list__item" id="po1oey_1351"><p>该函数的语法格式: </p><ul class="list _bullet" id="po1oey_1352"><li class="list__item" id="po1oey_1353"><p>date_format(日期类型数据,'日期格式')</p></li></ul></li></ul></li></ul><div class="code-block" data-lang="sql">
 select ename,date_format(hiredate,'%m-%d-%Y') as hiredate from emp;
</div><ul class="list _bullet" id="po1oey_1355"><li class="list__item" id="po1oey_1356"><p id="po1oey_1357">日期格式</p><ul class="list _bullet" id="po1oey_1358"><li class="list__item" id="po1oey_1359"><div class="table-wrapper"><table class="wide" id="po1oey_1360"><thead><tr class="ijRowHead" id="po1oey_1361"><th id="po1oey_1362"><p>notes.Java</p></th><th id="po1oey_1363"><p>MySQL</p></th><th id="po1oey_1364"><p>说明</p></th></tr></thead><tbody><tr id="po1oey_1365"><td id="po1oey_1366"><p>yyyy</p></td><td id="po1oey_1367"><p>%Y</p></td><td id="po1oey_1368"><p>年</p></td></tr><tr id="po1oey_1369"><td id="po1oey_1370"><p>MM</p></td><td id="po1oey_1371"><p>%m</p></td><td id="po1oey_1372"><p>月</p></td></tr><tr id="po1oey_1373"><td id="po1oey_1374"><p>dd</p></td><td id="po1oey_1375"><p>%d</p></td><td id="po1oey_1376"><p>日</p></td></tr><tr id="po1oey_1377"><td id="po1oey_1378"><p>HH</p></td><td id="po1oey_1379"><p>%H</p></td><td id="po1oey_1380"><p>时</p></td></tr><tr id="po1oey_1381"><td id="po1oey_1382"><p>mm</p></td><td id="po1oey_1383"><p>%i</p></td><td id="po1oey_1384"><p>分</p></td></tr><tr id="po1oey_1385"><td id="po1oey_1386"><p>ss</p></td><td id="po1oey_1387"><p>%s</p></td><td id="po1oey_1388"><p>秒</p></td></tr><tr id="po1oey_1389"><td id="po1oey_1390"><p>SSS</p></td><td id="po1oey_1391"></td><td id="po1oey_1392"><p>毫秒</p></td></tr></tbody></table></div></li></ul></li><li class="list__item" id="po1oey_1393"><p id="po1oey_1394">分组函数/聚合函数/多行处理函数 (忽略空值)</p><ul class="list _bullet" id="po1oey_1395"><li class="list__item" id="po1oey_1396"><div class="table-wrapper"><table class="wide" id="po1oey_1397"><thead><tr class="ijRowHead" id="po1oey_1398"><th id="po1oey_1399"><p>函数</p></th><th id="po1oey_1400"><p>说明</p></th></tr></thead><tbody><tr id="po1oey_1401"><td id="po1oey_1402"><p>count</p></td><td id="po1oey_1403"><p>取得记录值</p></td></tr><tr id="po1oey_1404"><td id="po1oey_1405"><p>sum</p></td><td id="po1oey_1406"><p>求和</p></td></tr><tr id="po1oey_1407"><td id="po1oey_1408"><p>avg</p></td><td id="po1oey_1409"><p>取平均</p></td></tr><tr id="po1oey_1410"><td id="po1oey_1411"><p>max</p></td><td id="po1oey_1412"><p>取最大值</p></td></tr><tr id="po1oey_1413"><td id="po1oey_1414"><p>min</p></td><td id="po1oey_1415"><p>取最小</p></td></tr></tbody></table></div></li><li class="list__item" id="po1oey_1416"><p>分组函数不能直接用在where函数中</p></li></ul></li><li class="list__item" id="po1oey_1417"><p id="po1oey_1418">distinct 去重复</p><ul class="list _bullet" id="po1oey_1419"><li class="list__item" id="po1oey_1420"><p>前面不能有字段</p></li></ul></li></ul><div class="code-block" data-lang="sql">
select distinct job from emp;
</div></section><section class="chapter"><h4 id="po1oey_1422" data-toc="po1oey_1422">分组查询</h4><ul class="list _bullet" id="po1oey_1423"><li class="list__item" id="po1oey_1424"><p>分组查询涉及的两个子句: </p><ul class="list _bullet" id="po1oey_1425"><li class="list__item" id="po1oey_1426"><p>group by 分组,优先执行(先分组,再where,再select再having)</p></li><li class="list__item" id="po1oey_1427"><p>having 分组之后过滤</p></li></ul></li><li class="list__item" id="po1oey_1428"><p>group by </p><ul class="list _bullet" id="po1oey_1429"><li class="list__item" id="po1oey_1430"><p>若一条DQL语句中有group by子句,那么select关键字后面只能跟参与分组的字段和分组函数 求不同job的最大sal</p></li></ul></li></ul><div class="code-block" data-lang="sql">
 select max(sal) from emp group by job;
</div><p id="po1oey_1432">求不同job的最大sal也显示job</p><div class="code-block" data-lang="sql">
select job,max(sal) from emp group by job;
</div><p id="po1oey_1434">两个字段联合划分分组</p><div class="code-block" data-lang="sql">
 select deptno,job,max(sal) from emp group by job,deptno;
</div><p id="po1oey_1436">select: 分组前筛选 having: 分组后筛选</p><div class="code-block" data-lang="sql">
 select job,avg(sal) from emp group by job having avg(sal)&gt;1500;

</div><ul class="list _bullet" id="po1oey_1438"><li class="list__item" id="po1oey_1439"><p>原则: </p><ul class="list _bullet" id="po1oey_1440"><li class="list__item" id="po1oey_1441"><p>尽量在where中过滤,无法过滤的数据,通常需要先分组之后再过滤,这个时候可以选择用having.效率问题</p></li></ul></li></ul></section><section class="chapter"><h4 id="po1oey_1442" data-toc="po1oey_1442">总结</h4><div class="code-block" data-lang="sql">
select
    ...
from
    ...
where
    ...
group by
    ...
having
    ...
order by
    ...

</div><ol class="list _decimal" id="po1oey_1444" type="1"><li class="list__item" id="po1oey_1445"><p>顺序不能变</p></li><li class="list__item" id="po1oey_1446"><p>执行顺序 </p><ol class="list _decimal" id="po1oey_1447" type="1"><li class="list__item" id="po1oey_1448"><p>from 从某张表中查询出来</p></li><li class="list__item" id="po1oey_1449"><p>where 经过某条件进行过滤</p></li><li class="list__item" id="po1oey_1450"><p>group by 然后分组</p></li><li class="list__item" id="po1oey_1451"><p>having 分组之后不满意再过滤</p></li><li class="list__item" id="po1oey_1452"><p>select 查询出来</p></li><li class="list__item" id="po1oey_1453"><p>order by 排序输出</p></li></ol></li></ol></section><section class="chapter"><h4 id="po1oey_1454" data-toc="po1oey_1454">连接查询</h4><ol class="list _decimal" id="po1oey_1455" type="1"><li class="list__item" id="po1oey_1456"><p id="po1oey_1457">什么是连接查询</p><ul class="list _bullet" id="po1oey_1458"><li class="list__item" id="po1oey_1459"><p>查询的时候只从一张表检索数据,称为单表查询</p></li><li class="list__item" id="po1oey_1460"><p>在实际开发中,数据并不是存储在一张表中,是同时存储在多张表中,这些表和表之箭存在关系,我们在检索的时候通常是 需要将多张表联合起来取得有效数据,这种多表查询被称为连接查询或者叫做跨表查询</p></li></ul></li><li class="list__item" id="po1oey_1461"><p id="po1oey_1462">链接查询根据出现年代分类</p><ul class="list _bullet" id="po1oey_1463"><li class="list__item" id="po1oey_1464"><p>SQL92[1992]</p></li><li class="list__item" id="po1oey_1465"><p>SQL00[1999:更新的语法,主要掌握这种]</p></li></ul></li><li class="list__item" id="po1oey_1466"><p id="po1oey_1467">连接查询根据连接方式可分为</p><ul class="list _bullet" id="po1oey_1468"><li class="list__item" id="po1oey_1469"><p>内连接 :A表和B表能够完全匹配的记录查询出来,被称为内连接(inner可以省略) </p><ul class="list _bullet" id="po1oey_1470"><li class="list__item" id="po1oey_1471"><p id="po1oey_1472">等值连接</p><ul class="list _bullet" id="po1oey_1473"><li class="list__item" id="po1oey_1474"><p>SQL92语法:等值连接</p></li></ul><div class="code-block" data-lang="sql">
  select e.ename ,d.dname from emp e ,dept d where e.deptno=d.deptno;
</div><p id="po1oey_1476">-SQL99语法:等值连接 join on - 表独立出来了,结构更清晰,对表连接不满意的话可以追加where过滤</p><div class="code-block" data-lang="sql">
 select e.ename ,d.dname from emp e join dept d on e.deptno=d.deptno;
</div></li><li class="list__item" id="po1oey_1478"><p id="po1oey_1479">非等值连接</p><ul class="list _bullet" id="po1oey_1480"><li class="list__item" id="po1oey_1481"><p id="po1oey_1482">SQL99:</p><div class="code-block" data-lang="sql">
select e.ename,s.grade from emp e , salgrade s where e.sal between s.losal and hisal;
</div></li><li class="list__item" id="po1oey_1484"><p id="po1oey_1485">SQL99:</p><div class="code-block" data-lang="sql">
select e.ename,s.grade from emp e join salgrade s on e.sal between s.losal and hisal;
</div></li></ul></li><li class="list__item" id="po1oey_1487"><p id="po1oey_1488">自连接</p><ul class="list _bullet" id="po1oey_1489"><li class="list__item" id="po1oey_1490"><p id="po1oey_1491">SQL99:</p><div class="code-block" data-lang="sql">
select e.ename , m.ename from emp e , emp m where m.empno=e.mgr;
</div></li><li class="list__item" id="po1oey_1493"><p id="po1oey_1494">SQL99:</p><div class="code-block" data-lang="sql">
select e.ename , m.ename from emp e join emp m on m.empno=e.mgr;
</div></li></ul></li></ul></li><li class="list__item" id="po1oey_1496"><p>外连接 : (outer可以省略) </p><ul class="list _bullet" id="po1oey_1497"><li class="list__item" id="po1oey_1498"><p id="po1oey_1499">A表和B表能够完全匹配的记录查询出来之外,将其中一张表的记录无条件的完全查询出来. 对方没有匹配的记录,会自动模拟出null与之匹配,这种查询被称为外连接</p></li><li class="list__item" id="po1oey_1500"><p id="po1oey_1501">外连接的查询结果条数&gt;=内连接的查询结果条数</p></li><li class="list__item" id="po1oey_1502"><p id="po1oey_1503">左外连接</p><ul class="list _bullet" id="po1oey_1504"><li class="list__item" id="po1oey_1505"><p id="po1oey_1506">SQL99:</p><div class="code-block" data-lang="sql">
select e.ename,d.dname from dept d left join emp e on e.deptno=d.deptno;
</div></li></ul></li><li class="list__item" id="po1oey_1508"><p id="po1oey_1509">右外连接</p><ul class="list _bullet" id="po1oey_1510"><li class="list__item" id="po1oey_1511"><p id="po1oey_1512">SQL99:</p><div class="code-block" data-lang="sql">
 select e.ename,d.dname from emp e right join dept d on e.deptno=d.deptno;
</div></li></ul></li><li class="list__item" id="po1oey_1514"><p id="po1oey_1515">任何一个右外连接都可以写成左外连接,反之亦可</p></li></ul></li><li class="list__item" id="po1oey_1516"><p>全连接</p></li></ul></li></ol><ul class="list _bullet" id="po1oey_1517"><li class="list__item" id="po1oey_1518"><p>若两张表进行连接查询的时候没有任何条件限制,最终的查询结果总数是两张表记录的条数的乘积,这种现象被称为 笛卡尔积现象,为了避免笛卡尔积现象的发生,必须在进行表连接的时候添加限制条件</p></li></ul><div class="code-block" data-lang="sql">
 select e.ename ,d.dname from emp e ,dept d;
</div><ul class="list _bullet" id="po1oey_1520"><li class="list__item" id="po1oey_1521"><p>多张表连接的语法格式</p></li></ul><div class="code-block" data-lang="sql">
select
    xxx
from
    a
join
    b
on
    条件
join
    c
on
    条件;

</div><p id="po1oey_1523">原理:a和b进行表连接之后,a再和c进行表连接</p><ul class="list _bullet" id="po1oey_1524"><li class="list__item" id="po1oey_1525"><p>案例:找出每一个员工对应的部门名称,以及该员工的工资等级:</p></li></ul><div class="code-block" data-lang="sql">
 select e.ename ,d.dname,s.grade from emp e join dept d on e.deptno=d.deptno join salgrade s on e.sal between losal and hisal;
</div><p id="po1oey_1527">子查询:</p><div class="code-block" data-lang="sql">
select e.ename,e.dname,s.grade from (select e.ename,e.sal,d.dname from emp e left join dept d on e.deptno=d.deptno) e left join salgrade s on e.sal between s.losal and hisal;
</div></section><section class="chapter"><h4 id="po1oey_1529" data-toc="po1oey_1529">子查询</h4><ol class="list _decimal" id="po1oey_1530" type="1"><li class="list__item" id="po1oey_1531"><p>什么是子查询 </p><ul class="list _bullet" id="po1oey_1532"><li class="list__item" id="po1oey_1533"><p>select语句嵌套select语句</p></li></ul></li><li class="list__item" id="po1oey_1534"><p>子查询可以出现在哪儿 </p><ul class="list _bullet" id="po1oey_1535"><li class="list__item" id="po1oey_1536"><p>select...(select)</p></li><li class="list__item" id="po1oey_1537"><p>from....(select)</p></li><li class="list__item" id="po1oey_1538"><p>where....(select)</p></li></ul></li></ol><p id="po1oey_1539">select后select</p><div class="code-block" data-lang="sql">
select e.ename,(select d.dname from dept d where e.deptno=d.deptno)as dname from emp e;
</div><ul class="list _bullet" id="po1oey_1541"><li class="list__item" id="po1oey_1542"><p>找出每个部门的平均薪水,并且要求显示平均薪水的薪水等级 from 后select</p></li></ul><div class="code-block" data-lang="sql">
select d.dname,s.grade from( select d.dname ,e.sal from (select deptno,avg(sal) as sal from emp group by deptno) e join dept d on d.deptno=e.deptno) d join salgrade s on d.sal between losal and hisal;
</div></section><section class="chapter"><h4 id="union" data-toc="union">union</h4><ul class="list _bullet" id="po1oey_1544"><li class="list__item" id="po1oey_1545"><p>连接两个表一同输出</p></li></ul><div class="code-block" data-lang="sql">
select xxxxx
union
select xxxxx
</div><p id="po1oey_1547">字段个数相同,(Oracle中数据类型也要相同)</p></section><section class="chapter"><h4 id="limit" data-toc="limit">limit</h4><ol class="list _decimal" id="po1oey_1548" type="1"><li class="list__item" id="po1oey_1549"><p>获取一张表中的某部分数据</p></li><li class="list__item" id="po1oey_1550"><p>只在MySQL数据库中存在,不通用,是MySQL数据库的特色</p></li></ol><div class="code-block" data-lang="sql">
 select ename ,sal from emp limit 5;
</div><p id="po1oey_1552">limit 5 代表,从表中记录下标0开始,取五条等同于下面的sql语句</p><div class="code-block" data-lang="sql">
 select ename ,sal from emp limit 0,5;
</div><p id="po1oey_1554">limit的语法: limit 起始下标,长度 - 起始坐标没有指定,默认从0开始,0表示表中的第一条ji'lu</p><ul class="list _bullet" id="po1oey_1555"><li class="list__item" id="po1oey_1556"><p>找出公司中工资排名在前五的员工</p></li></ul><div class="code-block" data-lang="sql">
select ename ,sal from emp order by sal desc limit 5;
</div></section></section><section class="chapter"><h3 id="po1oey_1558" data-toc="po1oey_1558">表</h3><ul class="list _bullet" id="po1oey_1559"><li class="list__item" id="po1oey_1560"><p>DDL</p></li></ul></section></section><div class="last-modified">Last modified: 30 四月 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="elasticsearch.html" class="navigation-links__prev">Elasticsearch</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.js"></script></body></html>