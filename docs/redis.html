<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2024-04-30T19:02:50.578862"><title>Redis | Notes</title><script type="application/json" id="virtual-toc-data">[{"id":"i2nnefm_391","level":0,"title":"安装\u0026启动","anchor":"#i2nnefm_391"},{"id":"i2nnefm_397","level":0,"title":"入门","anchor":"#i2nnefm_397"},{"id":"i2nnefm_506","level":0,"title":"进阶","anchor":"#i2nnefm_506"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Redis | Notes"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Notes Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/redis.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Redis | Notes"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/redis.html#webpage",
    "url": "writerside-documentation/redis.html",
    "name": "Redis | Notes",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Notes Help"
}</script><!-- End Schema.org --></head><body data-id="Redis" data-main-title="Redis" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Notes///java///notes///DB"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Notes  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Redis" id="Redis.md">Redis</h1><p id="i2nnefm_390">@[TOC]</p><section class="chapter"><h2 id="i2nnefm_391" data-toc="i2nnefm_391">安装&amp;启动</h2><section class="chapter"><h3 id="server" data-toc="server">server</h3><ul class="list _bullet" id="i2nnefm_392"><li class="list__item" id="i2nnefm_393"><p>redis_6379</p></li><li class="list__item" id="i2nnefm_394"><p>redis-server /etc/redis/6379.conf</p></li><li class="list__item" id="i2nnefm_395"><p><code class="code" id="i2nnefm_396">--loadmoudle</code></p></li></ul></section><section class="chapter"><h3 id="client" data-toc="client">client</h3></section></section><section class="chapter"><h2 id="i2nnefm_397" data-toc="i2nnefm_397">入门</h2><ul class="list _bullet" id="i2nnefm_398"><li class="list__item" id="i2nnefm_399"><p>无数据类型</p></li><li class="list__item" id="i2nnefm_400"><p>默认16个库(分为16个独立的区域)</p></li><li class="list__item" id="i2nnefm_401"><p>redis-cli -p xxxx -n [指定库]</p></li><li class="list__item" id="i2nnefm_402"><p>方法与类型绑定 </p><ul class="list _bullet" id="i2nnefm_403"><li class="list__item" id="i2nnefm_404"><p>type 获取值的类型</p></li></ul></li><li class="list__item" id="i2nnefm_405"><p>二进制安全 </p><ul class="list _bullet" id="i2nnefm_406"><li class="list__item" id="i2nnefm_407"><p>字节流</p></li><li class="list__item" id="i2nnefm_408"><p>字符流</p></li></ul></li><li class="list__item" id="i2nnefm_409"><p>redis-cli --raw 格式化</p></li><li class="list__item" id="i2nnefm_410"><p>help</p></li><li class="list__item" id="i2nnefm_411"><p>keys *</p></li><li class="list__item" id="i2nnefm_412"><p>flushall</p></li><li class="list__item" id="i2nnefm_413"><p>flushdb</p></li></ul><section class="chapter"><h3 id="i2nnefm_414" data-toc="i2nnefm_414">数据类型</h3><p id="i2nnefm_415">help @String</p><ul class="list _bullet" id="i2nnefm_416"><li class="list__item" id="i2nnefm_417"><p>String </p><ul class="list _bullet" id="i2nnefm_418"><li class="list__item" id="i2nnefm_419"><p>encoding-str </p><ul class="list _bullet" id="i2nnefm_420"><li class="list__item" id="i2nnefm_421"><p>set </p><ul class="list _bullet" id="i2nnefm_422"><li class="list__item" id="i2nnefm_423"><p>生存时间</p></li><li class="list__item" id="i2nnefm_424"><p>nx - 不存在的时候赋值</p></li><li class="list__item" id="i2nnefm_425"><p>xx - 存在的时候才能更新</p></li></ul></li><li class="list__item" id="i2nnefm_426"><p>get</p></li><li class="list__item" id="i2nnefm_427"><p>mset - 多个存</p></li><li class="list__item" id="i2nnefm_428"><p>mget - 多个取</p></li><li class="list__item" id="i2nnefm_429"><p>append - 追加</p></li><li class="list__item" id="i2nnefm_430"><p>getrange [start] [end] </p><ul class="list _bullet" id="i2nnefm_431"><li class="list__item" id="i2nnefm_432"><p>正反向索引</p></li></ul></li><li class="list__item" id="i2nnefm_433"><p>setrange 修改</p></li><li class="list__item" id="i2nnefm_434"><p>strlen -&gt; length</p></li><li class="list__item" id="i2nnefm_435"><p>msetnx 原子性多操作,一个失败就取消操作</p></li></ul></li><li class="list__item" id="i2nnefm_436"><p>encoding-int(省去之后计算的判断,本质还是字节流) </p><ul class="list _bullet" id="i2nnefm_437"><li class="list__item" id="i2nnefm_438"><p>incr +1</p></li><li class="list__item" id="i2nnefm_439"><p>incrby [value] n</p></li><li class="list__item" id="i2nnefm_440"><p>decr [value] 减1</p></li><li class="list__item" id="i2nnefm_441"><p>incrbyfloat [value] n 加浮点数</p></li></ul></li><li class="list__item" id="i2nnefm_442"><p>bitmap </p><ul class="list _bullet" id="i2nnefm_443"><li class="list__item" id="i2nnefm_444"><p>bitset 设置字节中的bit <code class="code" id="i2nnefm_445">offset是指bit</code></p></li><li class="list__item" id="i2nnefm_446"><p>bitpos 第一个1 <code class="code" id="i2nnefm_447">offset是指字节</code></p></li><li class="list__item" id="i2nnefm_448"><p>bitcount <code class="code" id="i2nnefm_449">offset是指字节</code></p></li><li class="list__item" id="i2nnefm_450"><p>bitop</p></li></ul></li></ul></li><li class="list__item" id="i2nnefm_451"><p>List </p><ul class="list _bullet" id="i2nnefm_452"><li class="list__item" id="i2nnefm_453"><p>Lpush</p></li><li class="list__item" id="i2nnefm_454"><p>Rpush</p></li><li class="list__item" id="i2nnefm_455"><p>Lpop</p></li><li class="list__item" id="i2nnefm_456"><p>Rpop</p></li><li class="list__item" id="i2nnefm_457"><p>lrange</p></li><li class="list__item" id="i2nnefm_458"><p>Lindex</p></li><li class="list__item" id="i2nnefm_459"><p>Rindex</p></li><li class="list__item" id="i2nnefm_460"><p>Lrem</p></li><li class="list__item" id="i2nnefm_461"><p>Rrem</p></li><li class="list__item" id="i2nnefm_462"><p>llen</p></li><li class="list__item" id="i2nnefm_463"><p>blpop </p><ul class="list _bullet" id="i2nnefm_464"><li class="list__item" id="i2nnefm_465"><p>阻塞队列,单播队列</p></li><li class="list__item" id="i2nnefm_466"><p>先进先出</p></li></ul></li><li class="list__item" id="i2nnefm_467"><p>Ltrim</p></li></ul></li><li class="list__item" id="i2nnefm_468"><p>Hash map(k-v) </p><ul class="list _bullet" id="i2nnefm_469"><li class="list__item" id="i2nnefm_470"><p>hset</p></li><li class="list__item" id="i2nnefm_471"><p>hget</p></li><li class="list__item" id="i2nnefm_472"><p>hgetall</p></li><li class="list__item" id="i2nnefm_473"><p>hincrby</p></li><li class="list__item" id="i2nnefm_474"><p>hincrybyfloat</p></li><li class="list__item" id="i2nnefm_475"><p><code class="code" id="i2nnefm_476">keys sean*</code></p></li></ul></li><li class="list__item" id="i2nnefm_477"><p>set </p><ul class="list _bullet" id="i2nnefm_478"><li class="list__item" id="i2nnefm_479"><p>sadd</p></li><li class="list__item" id="i2nnefm_480"><p>scard</p></li><li class="list__item" id="i2nnefm_481"><p>交集并集差集 </p><ul class="list _bullet" id="i2nnefm_482"><li class="list__item" id="i2nnefm_483"><p>sinter(store)</p></li><li class="list__item" id="i2nnefm_484"><p>sunion</p></li><li class="list__item" id="i2nnefm_485"><p>sdiff</p></li></ul></li><li class="list__item" id="i2nnefm_486"><p>sismember</p></li><li class="list__item" id="i2nnefm_487"><p>smembers</p></li><li class="list__item" id="i2nnefm_488"><p>srandmember</p></li><li class="list__item" id="i2nnefm_489"><p>spop</p></li></ul></li><li class="list__item" id="i2nnefm_490"><p>sorted_set </p><ul class="list _bullet" id="i2nnefm_491"><li class="list__item" id="i2nnefm_492"><p>zadd</p></li><li class="list__item" id="i2nnefm_493"><p>zrange #</p></li><li class="list__item" id="i2nnefm_494"><p>zrevrange #</p></li><li class="list__item" id="i2nnefm_495"><p>zrangebyscore</p></li><li class="list__item" id="i2nnefm_496"><p>zscore</p></li><li class="list__item" id="i2nnefm_497"><p>zrank</p></li><li class="list__item" id="i2nnefm_498"><p>zincrby 实时维护</p></li><li class="list__item" id="i2nnefm_499"><p>交集并集差集 </p><ul class="list _bullet" id="i2nnefm_500"><li class="list__item" id="i2nnefm_501"><p>zunionstore weights 聚合指令</p></li></ul></li><li class="list__item" id="i2nnefm_502"><p>zremovebyscore</p></li><li class="list__item" id="i2nnefm_503"><p>zremovebyrank </p><ul class="list _bullet" id="i2nnefm_504"><li class="list__item" id="i2nnefm_505"><p>滑动窗口</p></li></ul></li></ul></li></ul></section></section><section class="chapter"><h2 id="i2nnefm_506" data-toc="i2nnefm_506">进阶</h2><section class="chapter"><h3 id="i2nnefm_507" data-toc="i2nnefm_507">管道</h3><ul class="list _bullet" id="i2nnefm_508"><li class="list__item" id="i2nnefm_509"><p><code class="code" id="i2nnefm_510">echo -n &quot;set k1 99\n incr k1 \n get k1&quot; | nc xxxx 6379</code></p><ul class="list _bullet" id="i2nnefm_511"><li class="list__item" id="i2nnefm_512"><p>建立tcp通信就能跟redis对话</p></li></ul></li></ul></section><section class="chapter"><h3 id="i2nnefm_513" data-toc="i2nnefm_513">发布/订阅</h3></section><section class="chapter"><h3 id="i2nnefm_514" data-toc="i2nnefm_514">事务</h3><ul class="list _bullet" id="i2nnefm_515"><li class="list__item" id="i2nnefm_516"><p>transaction </p><ul class="list _bullet" id="i2nnefm_517"><li class="list__item" id="i2nnefm_518"><p>multi 开启事务</p></li><li class="list__item" id="i2nnefm_519"><p>exec 执行事务</p></li><li class="list__item" id="i2nnefm_520"><p>discard 取消事务</p></li><li class="list__item" id="i2nnefm_521"><p>watch </p><ul class="list _bullet" id="i2nnefm_522"><li class="list__item" id="i2nnefm_523"><p>乐观锁</p></li><li class="list__item" id="i2nnefm_524"><p>cas </p><ul class="list _bullet" id="i2nnefm_525"><li class="list__item" id="i2nnefm_526"><p>A </p><ol class="list _decimal" id="i2nnefm_527" type="1"><li class="list__item" id="i2nnefm_528"><p><code class="code" id="i2nnefm_529">watch k1</code></p></li><li class="list__item" id="i2nnefm_530"><p><code class="code" id="i2nnefm_531">multi</code></p></li><li class="list__item" id="i2nnefm_532"><p><code class="code" id="i2nnefm_533">get k1</code></p></li><li class="list__item" id="i2nnefm_534"><p><code class="code" id="i2nnefm_535">keys *</code></p></li></ol></li><li class="list__item" id="i2nnefm_536"><p>B </p><ol class="list _decimal" id="i2nnefm_537" type="1"><li class="list__item" id="i2nnefm_538"><p><code class="code" id="i2nnefm_539">muti</code></p></li><li class="list__item" id="i2nnefm_540"><p><code class="code" id="i2nnefm_541">keys *</code></p></li><li class="list__item" id="i2nnefm_542"><p><code class="code" id="i2nnefm_543">set k1 xxxxx</code></p></li><li class="list__item" id="i2nnefm_544"><p><code class="code" id="i2nnefm_545">exec</code></p></li><li class="list__item" id="i2nnefm_546"><p>A<code class="code" id="i2nnefm_547">exec</code></p><ul class="list _bullet" id="i2nnefm_548"><li class="list__item" id="i2nnefm_549"><p>数据被b修改过</p></li><li class="list__item" id="i2nnefm_550"><p>不执行事务</p></li></ul></li></ol></li></ul></li></ul></li></ul></li><li class="list__item" id="i2nnefm_551"><p>缓存穿透 </p><ul class="list _bullet" id="i2nnefm_552"><li class="list__item" id="i2nnefm_553"><p>module redisbloom </p><ul class="list _bullet" id="i2nnefm_554"><li class="list__item" id="i2nnefm_555"><p>bloom过滤器</p></li><li class="list__item" id="i2nnefm_556"><p>布谷鸟过滤器</p></li><li class="list__item" id="i2nnefm_557"><p>counting bloom</p></li></ul></li><li class="list__item" id="i2nnefm_558"><p>查找没有的东西</p></li></ul></li><li class="list__item" id="i2nnefm_559"><p>缓存和数据库的区别</p></li><li class="list__item" id="i2nnefm_560"><p>config </p><ul class="list _bullet" id="i2nnefm_561"><li class="list__item" id="i2nnefm_562"><p>内存 </p><ul class="list _bullet" id="i2nnefm_563"><li class="list__item" id="i2nnefm_564"><p>回收策略 </p><ul class="list _bullet" id="i2nnefm_565"><li class="list__item" id="i2nnefm_566"><p>noeviction 不丢,做数据库用</p></li><li class="list__item" id="i2nnefm_567"><p>lfu 碰了多少次</p></li><li class="list__item" id="i2nnefm_568"><p>lru 多久没碰</p></li><li class="list__item" id="i2nnefm_569"><p>random</p></li><li class="list__item" id="i2nnefm_570"><p>ttl</p></li></ul></li></ul></li></ul></li><li class="list__item" id="i2nnefm_571"><p><a href="http://www.redis.cn/commands/expire.html" id="i2nnefm_572" data-external="true" rel="noopener noreferrer">有效期</a></p><ul class="list _bullet" id="i2nnefm_573"><li class="list__item" id="i2nnefm_574"><p>ttl 按存活时间来 </p><ul class="list _bullet" id="i2nnefm_575"><li class="list__item" id="i2nnefm_576"><p>ttl + key 存活时间</p></li><li class="list__item" id="i2nnefm_577"><p>key的有效期,访问延长?no</p></li><li class="list__item" id="i2nnefm_578"><p>发生写,会剔除过期时间(没设置新的时间?)</p></li><li class="list__item" id="i2nnefm_579"><p>expire 设置时间(多少秒) </p><ul class="list _bullet" id="i2nnefm_580"><li class="list__item" id="i2nnefm_581"><p>expireat 指定时间(倒计时,且不能延长)</p></li></ul></li></ul></li><li class="list__item" id="i2nnefm_582"><p>被动/主动</p></li></ul></li></ul></section></section><div class="last-modified">Last modified: 30 四月 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="tankwar.html" class="navigation-links__next">Tank War 设计</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b259/app.js"></script></body></html>